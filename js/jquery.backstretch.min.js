/*
 * jQuery Backstretch
 * Version 1.3.0
 * https://github.com/zipang/jquery-backstretch
 *
 * Add a dynamically-resized background image to the page
 *
 * Original version Copyright (c) 2011 Scott Robbin (srobbin.com)
 * Dual licensed under the MIT and GPL licenses.
 * http://srobbin.com/jquery-plugins/backstretch/
 *
 * Version 1.3.0
 * Copyright (c) 2012 Christophe Desguez (eidolon-labs.com)
 */
(function(c){var e=("onorientationchange" in window)?c(document):c(window);var b;function d(){b=c("<div>").attr("id","backstretch").css({position:"fixed",left:0,top:0,margin:0,padding:0,overflow:"hidden",zIndex:-999999,height:"100%",width:"100%"}).appendTo("body")}var a={centeredX:true,centeredY:true,stretchMode:"crop",speed:0,transition:function(h,g,f,i){f.fadeOut(g);h.fadeIn(g,function(){f.remove();if(typeof i=="function"){i()}})}};c.backstretch=function(f,p,n){if(!b){d();c(window).resize(o)}var j=b.data("settings")||a;if(p&&typeof p=="object"){c.extend(j,p);b.data("settings",j)}else{if(p&&typeof p=="function"){n=p}}var i=b.find("img");var g=c("<img>").css({display:"none",margin:0,zIndex:-999999,width:"auto",height:"auto"}).bind("load",function h(){g.data("ratio",g.width()/g.height());b.data("image",g);o(function q(){j.transition(g,j.speed,i,n)})}).appendTo(b);g.attr("src",f);function o(s){try{var u=e.width(),v=e.height(),r=u/v,q=b.data("image").data("ratio");b.width(u).height(v);if(j.stretchMode=="crop"){m()}else{if(q<1){(r<1)?m():l()}else{(r>1)?m():k()}}}catch(t){}if(typeof s=="function"){s()}}function l(){b.data("image").css({display:"block",margin:(j.centeredX)?"0 auto":"0 auto 0 0",height:e.height()})}function k(){b.data("image").css({display:"block",margin:(j.centeredY)?"auto 0":"0 0 auto 0",width:e.width()})}function m(){var u=b.data("image"),t=u.data("ratio"),r={position:"absolute",left:0,top:0},s=e.width(),q=s/t,v;if(q>=e.height()){v=(q-e.height())/2;if(j.centeredY){c.extend(r,{top:"-"+v+"px"})}}else{q=e.height();s=q*t;v=(s-e.width())/2;if(j.centeredX){c.extend(r,{left:"-"+v+"px"})}}u.width(s).height(q).css(r)}return this}})(jQuery);