(function(d){var a=("onorientationchange" in window)?d(document):d(window);var b;function e(){b=d("<div>").attr("id","backstretch").css({position:"fixed",left:0,top:0,margin:0,padding:0,overflow:"hidden",zIndex:-999999,height:"100%",width:"100%"}).appendTo("body")}var c={centeredX:true,centeredY:true,stretchX:false,speed:0,transition:function(h,g,f,i){f.fadeOut(g);h.fadeIn(g,function(){f.remove();if(typeof i=="function"){i()}})}};d.backstretch=function(f,o,n){if(!b){e();d(window).resize(l)}var k=b.data("settings")||c;if(o&&typeof o=="object"){d.extend(k,o);b.data("settings",k)}else{if(o&&typeof o=="function"){n=o}}var j=b.find("img");var g=d("<img>").css({position:"absolute",display:"none",margin:0,zIndex:-999999,width:"auto",height:"auto"}).bind("load",function h(){g.data("ratio",g.width()/g.height());b.data("image",g);l(function p(){k.transition(g,k.speed,j,n)})}).appendTo(b);g.attr("src",f);function l(p){try{b.width(a.width()).height(a.height());if(k.stretchX){m()}else{i()}}catch(q){}if(typeof p=="function"){p()}}function i(){b.data("image").css({margin:(k.centeredX)?"0 auto":"0 auto 0 0",height:a.height()})}function m(){var r=b.data("image"),q=r.data("ratio"),s={left:0,top:0},u=a.width(),p=u/q,t;if(p>=a.height()){t=(p-a.height())/2;if(k.centeredY){d.extend(s,{top:"-"+t+"px"})}}else{p=a.height();u=p*q;t=(u-a.width())/2;if(k.centeredX){d.extend(s,{left:"-"+t+"px"})}}r.width(u).height(p).css(s)}return this}})(jQuery);