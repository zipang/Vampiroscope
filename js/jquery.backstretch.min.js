/*
 * jQuery Backstretch
 * Version 1.3.0
 * https://zipang.github.com/jquery-backstretch
 *
 * Add a dynamically-resized background image to the page
 *
 * Original version Copyright (c) 2011 Scott Robbin (srobbin.com)
 * Dual licensed under the MIT and GPL licenses.
 * http://srobbin.com/jquery-plugins/backstretch/
 *
 * Version 1.3.0
 * Copyright (c) 2012 Christophe Desguez (eidolon-labs.com)
 */
(function(c){var e=("onorientationchange" in window)?c(document):c(window);var b;function d(){b=c("<div>").attr("id","backstretch").css({position:"fixed",left:0,top:0,margin:0,padding:0,overflow:"hidden",zIndex:-999999,height:"100%",width:"100%"}).appendTo("body")}var a={centeredX:true,centeredY:true,stretchMode:"crop",speed:1000,transition:function(h,g,f,i){f.fadeOut(g);h.fadeIn(g,function(){f.remove();if(typeof i=="function"){i()}})}};c.backstretch=function(l,g,m){if(!b){d();c(window).resize(j)}var k=b.data("settings")||a;if(g&&typeof g=="object"){c.extend(k,g);b.data("settings",k)}else{if(g&&typeof g=="function"){m=g}}var i=b.find("img");var h=c("<img>").css({display:"none",zIndex:-999999,width:"auto",height:"auto"}).bind("load",function f(){h.data("ratio",h.width()/h.height());b.data("image",h);j(function n(){k.transition(h,k.speed,i,m)})}).appendTo(b);h.attr("src",l);function j(s){var r=e.width(),t=e.height(),u=b.data("image"),q=u.data("ratio");b.width(r).height(t);var p=r;var n=p/q;if(k.stretchMode=="crop"){if(n<t){n=t;p=n*q}}else{if(k.stretchMode=="adapt"){if(q<1){n=t;p=n*q}}else{if(n>t){n=t;p=n*q}}}var o={position:"absolute",left:0,top:0};if(k.centeredY){c.extend(o,{top:((t-n)/2)+"px"})}if(k.centeredX){c.extend(o,{left:((r-p)/2)+"px"})}u.width(p).height(n).css(o);if(typeof s=="function"){s()}}return this}})(jQuery);
